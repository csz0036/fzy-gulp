"use strict";$(function(){var a=void 0,s=1;function t(e){$("#resourceCenterNav p").eq(e).find("span").addClass("activet").end().siblings("p").find("span").removeClass("activet"),$("#listScroll").find(".caseList").eq(e).addClass("active").siblings().removeClass("active")}$("#resourceCenterNav span").on("click",function(){$("#loding").show(),localStorage.removeItem("pageNamber"),localStorage.removeItem("totalPage");var e=$(this).parent("p").index();switch($("#listScroll ul").html(""),history.replaceState("resourceCenter.html","","resourceCenter.html?tabId="+e),t(e),s=1,$("html,body").animate({scrollTop:0},"fast"),e){case 0:$("#titleText").text("新闻动态"),o(0,1,"companyNewsWrap"),a="companyNewsWrap";break;case 1:$("#titleText").text("专业分析"),o(1,1,"majorWrap"),a="majorWrap";break;case 2:$("#titleText").text("行业报告"),o(2,1,"reportWrap"),a="reportWrap"}});var r=$("#head").height(),i=$("#resourceCenterNav").offset().top-r;function o(e,s,r){$.ajax({url:apiUrl+"news/list",type:"get",dataType:"json",data:{type:e,page:s,pageSize:10},success:function(e){$("#loding").hide();var t=Math.ceil(e.body.total/10);if(localStorage.setItem("totalPage",t),!(t<s)){var a=e.body.newsList;"reportWrap"===r?$.each(a,function(e,t){$("#"+r).append('<li>\n                                <a href="./detail.html?news_id='+t.news_id+'"><img class="listImg" src="./images/error.png" data-src="'+t.head_url+'"\n                                            alt=""></a>\n                                <p class="listTitle">'+t.title+'</p>\n                                <p class = "listContent" >'+t.publish_time+'</p> \n                                <span class="dow"><a href="'+t.download_url+'" target="_blank">在线预览</a></span>\n                            </li>')}):$.each(a,function(e,t){$("#"+r).append('<li>\n                                <a href = "./detail.html?news_id='+t.news_id+'"> <img class="listImg" src="./images/error.png" data-src ="'+t.head_url+'"\n                                            alt=""></a>\n                                <p class="listTitle">'+t.title+'</p>\n                                <p class = "listContent" >'+t.publish_time+"</p> \n                            </li>")}),new LazyLoadImg({el:document.querySelector("body"),mode:"default",time:300,done:!0,position:{top:0,right:0,bottom:0,left:0},before:function(){},success:function(e){e.classList.add("success")},error:function(e){e.src="./images/error.png"}}).start()}}})}$(window).scroll(function(){var e=$(this).scrollTop(),t=$(this).height();if(i<e?$(".navFixed").css({position:"fixed",top:r,left:0}):$(".navFixed").css({position:"static"}),e+t==$(document).height()){if(s>=localStorage.getItem("totalPage"))return;s++,o($("#"+a).index(),s,a),localStorage.setItem("pageNamber",s)}});var e,n,l=(e=new RegExp("(^|&)"+"tabId"+"=([^&]*)(&|$)"),null!=(n=window.location.search.substr(1).match(e))?unescape(n[2]):null);0!=l&&l?1==l?(o(1,1,"majorWrap"),t(1),a="majorWrap"):2==l&&(o(2,1,"reportWrap"),t(2),a="reportWrap"):(o(0,1,"companyNewsWrap"),t(0),a="companyNewsWrap")});